import { ArgsTable, Meta, Story, Canvas, Preview } from '@storybook/addon-docs'
import handlebars from 'handlebars'

<Meta
    title="Komponenten/Buttons/Link-Button"
    argTypes={{
        _css: {
            description: 'Erlaubt die Angabe zusätzlicher CSS Klassen für den Button',
            control: 'text',
            table: {
                category: 'Button',
            },
        },
        _label: {
            description: 'Label des Buttons',
            control: 'text',
            table: {
                category: 'Label',
            },
        },
        _icon: {
            description: 'Der Name des Icons in der Iconmap',
            control: 'text',
            table: {
                category: 'Icon',
            },
        },
        _iconMap: {
            control: 'text',
            description: 'Der Name der zu verwendenden Iconmap',
            table: {
                defaultValue: {
                    summary: 'icons',
                },
                category: 'Icon',
            },
        },
        _size: {
            control: { type: 'select', options: ['sm', 'md', 'lg'] },
            description: 'Bestimmt die Größe des Buttons. Erlaubte Werte sind `sm`, `md` und `lg`',
            table: {
                category: 'Button',
                defaultValue: {
                    summary: 'md',
                },
            },
        },
        _variant: {
            description:
                'In welcher Variante soll der Button dargestellt werden. Erlaubte Varianten sind `ghost`, `ghost-white`, `inverted`, `transparent`',
            control: {
                type: 'select',
                options: ['ghost', 'ghost-white', 'inverted', 'transparent'],
            },
            table: {
                category: 'Button',
            },
        },
    }}
    parameters={{
        controls: {
            sort: 'alpha',
        },
    }}
/>

export const buttonWithLabelTemplate = (args, { globals: { customConditionalToolbar } }) => {
    let brand =
        undefined !== customConditionalToolbar ? customConditionalToolbar['brands'] : 'hessenschau'
    let hbsTemplate = handlebars.compile(`
    {{#> components/button/button_link}}
        {{> components/button/components/button_label}}
    {{/components/button/button_link}}
  `)
    return hbsTemplate({ brand, ...args })
}

export const buttonWithLabelAndIconRightTemplate = (
    args,
    { globals: { customConditionalToolbar } }
) => {
    let brand =
        undefined !== customConditionalToolbar ? customConditionalToolbar['brands'] : 'hessenschau'
    let hbsTemplate = handlebars.compile(`
    {{#> components/button/button_link}}
        {{> components/button/components/button_label}}
        {{> components/button/components/button_icon }}
    {{/components/button/button_link}}
  `)
    return hbsTemplate({ brand, ...args })
}

export const buttonWithLabelAndIconLeftTemplate = (
    args,
    { globals: { customConditionalToolbar } }
) => {
    let brand =
        undefined !== customConditionalToolbar ? customConditionalToolbar['brands'] : 'hessenschau'
    let hbsTemplate = handlebars.compile(`
    {{#> components/button/button_link~}}
        {{> components/button/components/button_icon }}
        {{> components/button/components/button_label}}
    {{~/components/button/button_link}}
  `)
    return hbsTemplate({ brand, ...args })
}

# Link-Button

-   [Übersicht](#übersicht)
-   [Eigenschaften](#eigenschaften)
-   [Varianten](#varianten)
-   [Verwendung](#verwendung)

## Übersicht

Der Link-Button erlaubt es einen HTML-Link optisch wie einen Button aussehen zu lassen. Die Komponente sollte immer
dann eingesetzt werden, wenn beim Klick auf die Schaltfläche eine neue Seite geöffnet werden soll.
Beispiele hierfür sind die Schaltfläche am unteren Rand einer Tab-Box, die es
ermöglicht auf eine Seite mit weiteren Inhalten zu kommen, die Schaltfläche innerhalb eines Cluster-Teasers, die auf eine Seite mit weiteren Beiträgen verlinkt
oder die Schaltfläche innerhalb eines Poster-Teasers, die auf den konkreten Inhalt verlinkt.

Die Link-Button-Komponente als solches ist sehr einfach gehalten. Sie stellt nur ein Grundgerüst (ein gestyltes HTML-Link Element) zur Verfügung.
Alle Inhalte des Buttons, wie das [Label](?path=/docs/komponenten-button-komponenten-label--label) oder ein mögliches
[Icon](?path=/docs/komponenten-button-komponenten-icon--icon), können flexibel durch Subkomponenten hinzugefügt werden.

<Canvas>
    <Story
        name="Spielplatz"
        args={{
            _size: 'md',
            _label: 'Button',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
</Canvas>

## Eigenschaften

<ArgsTable story="Spielplatz" />

## Varianten

Auf einer Inhaltsseite kann mehr als ein Button platziert werden. Um wichtige von weniger wichtigen Aktionen
unterscheidbar zu machen, sind unterschiedliche optische Varianten und Größen von Buttons zu verwenden.

### Größen

<Preview withToolbar>
    <Story
        name="Button - lg"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Large',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
    <Story
        name="Button - md"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'md',
            _label: 'Medium',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
    <Story
        name="Button - sm"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'sm',
            _label: 'Small',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
</Preview>

### Button-Arten

<Preview withToolbar>
    <Story
        name="Button - Normal"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Normal',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
    <Story
        name="Button - Ghost"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Ghost',
            _variant: 'ghost',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
    <Story
        name="Button - Invertiert"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Invertiert',
            _variant: 'inverted',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
    <Story
        name="Button - Transparent"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Transparent',
            _variant: 'transparent',
        }}
    >
        {buttonWithLabelTemplate.bind({})}
    </Story>
</Preview>

### Button mit Icon <a id="button-icon"/>

<Preview withToolbar>
    <Story
        name="Button - Icon rechts"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Icon rechts',
            _icon: 'arrow-right',
        }}
    >
        {buttonWithLabelAndIconRightTemplate.bind({})}
    </Story>
    <Story
        name="Button - Icon links"
        argTypes={{
            _size: {
                control: false,
            },
            _variant: {
                control: false,
            },
        }}
        args={{
            _size: 'lg',
            _label: 'Icon links',
            _icon: 'arrow-left',
        }}
    >
        {buttonWithLabelAndIconLeftTemplate.bind({})}
    </Story>
</Preview>

## Verwendung

Ein Link-Button wird mit der Handlebar Komponente `button_link` eingebunden. Wie einleitend schon beschrieben, stellt diese
Komponente lediglich das Grundgerüst eines Buttons dar. Die Beschriftung und/oder ein Icon müssen mit Subkomponenten hinzugefügt
werden.

<div class="bg-blue-200 !mt-4 p-4">
    <h4 class="!text-stone-950 font-bold">Hinweis</h4>
    <p>
        Sowohl die Link-Button-Komponente als auch die Subkomponenten Button-Label und Button-Icon
        sind standardmäßig bereits gestyled. Das setzen von zusätzlichen Style Klassen über den
        Parameter <pre class="inline">_css</pre> ist zwar bei jeder Komponente möglich, sollte aber
        nur dann gemacht werden, wenn es gar nicht anders geht.
    </p>
</div>

### Button mit Text

Ein [Button der Ausprägung `normal`](#button-arten) mit Beschriftung wird, wie in folgendem Codebeispiel gezeigt, gebaut.

```handlebars
{{#> components/button/button_link _size="lg"}}
    {{> components/button/components/button_label _label="Button"}}
{{/components/button/button_link}}
```

### Button mit Text und Icon

Ein [Button der Ausprägung `normal` mit einem Label und einem rechts daneben stehenden Icon](#button-mit-icon-a-idbutton-icon) wird, wie in folgendem Codebeispiel gezeigt, gebaut.

```handlebars
{{#> components/button/button_link _size="lg"}}
    {{> components/button/components/button_label _label="Button"}}
    {{> components/button/components/button_icon _icon="arrow-right" _iconmap="icons"}}
{{/components/button/button_link}}
```

Soll das Icon links vom Label stehen, muss der Aufruf der Subkomponenten einfach vertauscht werden.

```handlebars
{{#> components/button/button_link _size="lg"}}
    {{> components/button/components/button_icon _icon="arrow-left" _iconmap="icons"}}
    {{> components/button/components/button_label _label="Button"}}
{{/components/button/button_link}}
```

Der passende Abstand zwischen Icon und Label wird automatisch per CSS gesetzt.
