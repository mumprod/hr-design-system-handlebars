"use strict";(globalThis.webpackChunkardplayer=globalThis.webpackChunkardplayer||[]).push([[421],{14746:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var a,s=i(54449),r=i(70182),n=i(97173),o=i(9489),l=i(77024),h=function(e,t,i,a){if("a"===i&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?a:"a"===i?a.call(e):a?a.value:t.get(e)},d=function(e,t,i,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,i):s?s.value=i:t.set(e,i),i};const c="urn:x-cast:de.swr.ardplayer.caf.player-events";class u extends s.F{constructor(e,t){var i;super(e,t),this.lastState="",this.currentMediaStream=null,this.currentTime=0,this.dvrTime=0,this.dvrLeft=0,this.dvrRight=0,this.onCustomChannelMessage=(e,t)=>{this.log("got message from receiver",e,t);try{if(e===c){const e=JSON.parse(t);this.onEventChannelMessage(e)}}catch(e){this.error("could not parse custom channel message",e,t)}},a.set(this,!1),1!==this.model.playbackRate&&(this.model.playbackRate=1,this.player.loop.dispatchEvent(n.a.PLAYBACK_RATE_CHANGE,{rate:1})),t.ctrl=this,null===(i=this.session)||void 0===i||i.addMessageListener(c,this.onCustomChannelMessage)}get isRemotePlayback(){return!0}applyVideoScale(e){}get castAddon(){var e;return null!==(e=this.player.addons.find((e=>"AddonChromecast"===e.ID)))&&void 0!==e?e:null}removeEventListeners(){var e;super.removeEventListeners(),this.vc.toggleForceControlsVisible("ChromeCast",!1),this.vc.playerView.classList.remove("ardplayer-state-casting-volumecontrol"),null===(e=this.session)||void 0===e||e.removeMessageListener(c,this.onCustomChannelMessage)}addEventListeners(){var e,t,i;this._dvrModeEnabled=!1,this._dvrWindow=0,this._dvrIsLive=!1,this.dvrTime=-1,this.vc.toggleForceControlsVisible("ChromeCast",!0);const a=this.castAddon;if(null!==(t=null===(e=a.remotePlayer)||void 0===e?void 0:e.canControlVolume)&&void 0!==t&&t&&this.vc.playerView.classList.add("ardplayer-state-casting-volumecontrol"),this.remotePlayer=a.remotePlayer,this.remotePlayerController=a.remotePlayerController,!this.remotePlayerController)throw Error("could not get remote player controller");this.session=null===(i=a.remoteCtx)||void 0===i?void 0:i.getCurrentSession(),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,this.onTimeUpdate,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,this.onStateChange,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,this.onMuteChange,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this.onVolumeChange,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.MEDIA_INFO_CHANGED,this.onMediaInfoChange,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.DURATION_CHANGED,this.onDurationChange,this),this.emap.map(this.remotePlayerController,cast.framework.RemotePlayerEventType.LIVE_SEEKABLE_RANGE_CHANGED,this.onLiveSeekableRangeChanged,this)}onEventChannelMessage(e){var t;"CONNECT_HANDSHAKE"===e.type?null===(t=this.session)||void 0===t||t.sendMessage(c,{type:"CONNECT_HANDSHAKE"}).catch(this.error):"ERROR"===e.type?this.player.safeTimeout((()=>{var t;this.lastState="ERROR",null===(t=this.player.errorCtrl)||void 0===t||t.throwStreamError("chromecast playback error\n"+JSON.stringify(e))})):this.info("further info",e)}onMediaInfoChange(e){this.log(e),this.mediaElement.updateCurrentSubtitleIdFromRemote()}onMuteChange(e){this.player.loop.dispatchEvent("Player.EXTERNAL_VOLUME_UPDATE",{volume:100*this.mediaElement.volume,muted:e.value,track:!1})}onVolumeChange(e){this.player.loop.dispatchEvent("Player.EXTERNAL_VOLUME_UPDATE",{volume:100*e.value,muted:this.mediaElement.muted,track:!1})}onStateChange(e){switch(this.log("statechange",e.value),e.value){case"PLAYING":this.onPlay();break;case"PAUSED":this.onPause(null);break;case"BUFFERING":this.bufferingEventHandler(!0);break;case"IDLE":"PLAYING"===this.lastState&&this.endEventHandler(null)}this.lastState=e.value}restartMedia(){null!==this.currentMediaStream&&this.loadStream(this.currentMediaStream)}onDurationChange(e){this._duration=e.value,this._ready=!0}getDuration(){return this._dvrModeEnabled?this._dvrWindow:this._duration}onTimeUpdate(e){this.currentTime=e.value}getCurrentTime(){var e,t,i;return this._pendingSeek>0?this._pendingSeek:this._dvrModeEnabled?this.dvrTime:null!==(i=null!==(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:this.currentTime)&&void 0!==i?i:0}onLiveSeekableRangeChanged(e){var t,i;this._dvrModeEnabled=e.value&&e.value.end>0,e.value&&(this.dvrLeft=e.value.start,this.dvrRight=e.value.end),this._dvrWindow=this.dvrRight-this.dvrLeft,this.dvrTime=(null!==(i=null===(t=this.remotePlayer)||void 0===t?void 0:t.currentTime)&&void 0!==i?i:0)-this.dvrLeft,this.updateDVRValues()}updateDVRValues(){this.onDVRCallback(this._dvrModeEnabled,this._dvrWindow,this.currentTime>=this.getDuration())}loadStream(e){var t,i,s,d,c,u,m,p,v,E,T,y,f,g,S,k;this.log("loadStream()"),this.player.viewCtrl.hidePosterFrame(),this.mediaElement.mediaLoading(),this.model.playstate=r.R.PLAYSTATE_UNSPECIFIED,this.currentMediaStream=e;const _=this.mc.isLive;if((null===(t=this.remotePlayer)||void 0===t?void 0:t.canControlVolume)&&this.player.loop.dispatchEvent("Player.EXTERNAL_VOLUME_UPDATE",{volume:100*this.remotePlayer.volumeLevel,muted:this.remotePlayer.isMuted,track:!1}),this.stopOtherPlayingPlayers(),this.player.loop.dispatchEvent(n.a.EVENT_LOAD_STREAM,{mediaStream:e}),this._pendingSeek=this.model.time,!this._pendingSeek&&!this.mc.isLive){let e=this.pc.generic.vodInitialPlayheadSeconds;e<=0&&(e=this.pc.generic.vodStartSeconds),this._pendingSeek=e}const C=[];this.mc.subtitles.map((e=>Object.assign({},e,{sources:e.sources.filter((e=>"webvtt"===e.kind&&!(0,o.z3)(e.url)))}))).filter((e=>{var t,i;return(null!==(i=null===(t=e.sources)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>0})).forEach(((e,t)=>{var i;const a=new chrome.cast.media.Track(t,chrome.cast.media.TrackType.TEXT);let s=String(null!==(i=e.sources[0].url)&&void 0!==i?i:"");s.startsWith("//")&&(s=`https:${s}`),a.trackContentId=s,a.trackContentType="text/vtt",a.subtype=chrome.cast.media.TextTrackType.SUBTITLES,a.name=`${(0,o.OT)(e.languageCode)}${"simple-language"===e.kind?" - Einfache Sprache":""}`,a.language=e.languageCode,a.customData=null,C.push(a)}));const A=new chrome.cast.media.MediaInfo(e.url,e.mimeType);A.tracks=C,A.streamType=_?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,A.duration=_?-1:null!==(i=this.mc.meta.durationSeconds)&&void 0!==i?i:0,this.player.isAudio?(A.metadata=new chrome.cast.media.MusicTrackMediaMetadata,A.metadata.songName=null!==(s=this.mc.meta.title)&&void 0!==s?s:"",A.metadata.title=null!==(d=this.mc.meta.title)&&void 0!==d?d:"",A.metadata.albumName=null!==(m=null!==(u=null!==(c=this.mc.meta.seriesTitle)&&void 0!==c?c:this.mc.meta.subHeading)&&void 0!==u?u:this.mc.meta.synopsis)&&void 0!==m?m:"",(0,o.Ed)(null===(p=this.mc.meta.publicationService)||void 0===p?void 0:p.name)&&(A.metadata.albumArtist=null===(v=this.mc.meta.publicationService)||void 0===v?void 0:v.name),(0,o.Ed)(this.mc.meta.broadcastedOnDateTime)&&(A.metadata.releaseDate=this.mc.meta.broadcastedOnDateTime)):(A.metadata=new chrome.cast.media.MovieMediaMetadata,A.metadata.title=null!==(E=this.mc.meta.title)&&void 0!==E?E:"",A.metadata.subtitle=null!==(f=null!==(y=null!==(T=this.mc.meta.seriesTitle)&&void 0!==T?T:this.mc.meta.subHeading)&&void 0!==y?y:this.mc.meta.synopsis)&&void 0!==f?f:"",(0,o.Ed)(null===(g=this.mc.meta.publicationService)||void 0===g?void 0:g.name)&&(A.metadata.studio=null===(S=this.mc.meta.publicationService)||void 0===S?void 0:S.name),(0,o.Ed)(this.mc.meta.broadcastedOnDateTime)&&(A.metadata.releaseDate=this.mc.meta.broadcastedOnDateTime));const w=(0,l.ll)([this.player.isAudio?"audio":"preview"],this.player.model);A.metadata.images=w.map((e=>({url:new URL(e.url,document.baseURI).href}))),this.mediaElement.mediaInfo=A;const b=new chrome.cast.media.LoadRequest(A);null===(k=cast.framework.CastContext.getInstance().getCurrentSession())||void 0===k||k.loadMedia(b).then((()=>{try{this.player.checkState()}catch(e){return void this.warn("aborting async",e)}h(this,a,"f")?this.error("loadMedia resolved after disposal!"):(this._ready=!0,this.evalInitialSeek(),this.mediaElement.mediaLoaded(),this.player.loop.dispatchEvent(n.a.EVENT_STREAM_LOADED,{}),this.player.loop.dispatchEvent(n.a.EVENT_INITIAL_FRAME,{}))}),(()=>this.error))}dispose(){d(this,a,!0,"f"),super.dispose()}setCurrentTime(e,t,i,a){if(void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),this.remotePlayer&&this.remotePlayerController&&this.remotePlayer.canSeek){let i=Math.min(e,this.getDuration()-.1);this._dvrModeEnabled&&(i=this.dvrLeft+e,this.dvrTime=e),this.remotePlayer.currentTime=i,this.remotePlayerController.seek(),this.onStateChange({value:"BUFFERING"}),super.setCurrentTime(e,t,!0,a)}}updateTicker(){if(this._dvrModeEnabled)switch(this.model.playstate){case r.R.PLAYSTATE_PAUSED:case r.R.PLAYSTATE_PLAYING:this.dvrLeft+=.5,this.dvrRight+=.5}super.updateTicker()}canSeek(){return!0}getClassTypeString(){return"ChromecastCtrl"}addSource(e){this.warn("addSource not implemented for Chromecast.")}}a=new WeakMap;const m=u;var p=i(25160),v=function(e,t,i){for(var a=arguments.length>2,s=0;s<t.length;s++)i=a?t[s].call(e,i):t[s].call(e);return a?i:void 0},E=function(e,t,i,a,s,r){function n(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=a.kind,h="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?a.static?e:e.prototype:null,c=t||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),u=!1,m=i.length-1;m>=0;m--){var p={};for(var v in a)p[v]="access"===v?{}:a[v];for(var v in a.access)p.access[v]=a.access[v];p.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");r.push(n(e||null))};var E=(0,i[m])("accessor"===l?{get:c.get,set:c.set}:c[h],p);if("accessor"===l){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=n(E.get))&&(c.get=o),(o=n(E.set))&&(c.set=o),(o=n(E.init))&&s.unshift(o)}else(o=n(E))&&("field"===l?s.unshift(o):c[h]=o)}d&&Object.defineProperty(d,a.name,c),u=!0},T=function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function n(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,o)}l((a=a.apply(e,t||[])).next())}))},y=function(e,t,i,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,i):s?s.value=i:t.set(e,i),i},f=function(e,t,i,a){if("a"===i&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?a:"a"===i?a.call(e):a?a.value:t.get(e)};class g{constructor(e,t,i,a){this.idNum=e,this.language=t,this.kind=i,this.mediaElement=a,this.id=String(this.idNum)}get mode(){return this.mediaElement.currentSubtitleId===this.idNum?"showing":"hidden"}set mode(e){"showing"===e?this.mediaElement.currentSubtitleId=this.idNum:this.mediaElement.currentSubtitleId===this.idNum&&(this.mediaElement.currentSubtitleId=-1)}}let S=(()=>{var e,t,i,a;let s,r=[];return e=class{constructor(){this.ctrl=(v(this,r),null),this.mediaInfo=null,t.set(this,!0),i.set(this,null),a.set(this,-1),this.videoHeight=0,this.videoWidth=0}mediaLoading(){y(this,t,!0,"f")}mediaLoaded(){y(this,t,!1,"f"),f(this,i,"f")&&(f(this,i,"f").call(this),y(this,i,null,"f"))}get remotePlayer(){var e,t;return null!==(t=null===(e=this.ctrl)||void 0===e?void 0:e.remotePlayer)&&void 0!==t?t:null}get remotePlayerController(){var e,t;return null!==(t=null===(e=this.ctrl)||void 0===e?void 0:e.remotePlayerController)&&void 0!==t?t:null}get buffered(){return{length:0,start:()=>0,end:()=>0}}get currentTime(){var e,t;return null!==(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:-1}set currentTime(e){var t,i;(null===(t=this.remotePlayer)||void 0===t?void 0:t.canSeek)&&(this.remotePlayer.currentTime=e,null===(i=this.remotePlayerController)||void 0===i||i.seek())}get duration(){var e,t;return null!==(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.duration)&&void 0!==t?t:-1}get textTracks(){var e,t,i,a,s;const r=null!==(s=null!==(i=null===(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.mediaInfo)||void 0===t?void 0:t.tracks)&&void 0!==i?i:null===(a=this.mediaInfo)||void 0===a?void 0:a.tracks)&&void 0!==s?s:null;return null==r?[]:r.map((e=>new g(e.trackId,e.language,"subtitles",this)))}get currentSubtitleId(){return f(this,a,"f")}set currentSubtitleId(e){y(this,a,e,"f");const s=e>=0?[e]:[],r=new chrome.cast.media.EditTracksInfoRequest(s),n=()=>{var e,t;null===(t=null===(e=cast.framework.CastContext.getInstance().getCurrentSession())||void 0===e?void 0:e.getMediaSession())||void 0===t||t.editTracksInfo(r,(()=>{var e;null===(e=this.ctrl)||void 0===e||e.log("active chromecast tracks",s)}),(e=>{var t;return null===(t=this.ctrl)||void 0===t?void 0:t.log(e)}))};f(this,t,"f")?y(this,i,n,"f"):n()}updateCurrentSubtitleIdFromRemote(){var e,t,i,s,r,n,o,l;const h=null!==(i=null===(t=null===(e=cast.framework.CastContext.getInstance().getCurrentSession())||void 0===e?void 0:e.getMediaSession())||void 0===t?void 0:t.activeTrackIds)&&void 0!==i?i:null;if(null===(s=this.ctrl)||void 0===s||s.log("update subtitle state from",h),null!=h){const e=0===h.length?-1:h[0];if(e!==f(this,a,"f"))if(-1===e){const t=null!==(r=Array.from(this.textTracks).find((e=>"showing"===e.mode)))&&void 0!==r?r:null;y(this,a,e,"f"),null===(n=this.ctrl)||void 0===n||n.onTextTracksChanged({type:"modechange",track:t})}else y(this,a,e,"f"),null===(o=this.ctrl)||void 0===o||o.onTextTracksChanged({type:"modechange",track:null!==(l=Array.from(this.textTracks).find((e=>"showing"===e.mode)))&&void 0!==l?l:null})}}get muted(){var e,t;return null!==(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.isMuted)&&void 0!==t&&t}set muted(e){var t;this.muted!==e&&(null===(t=this.remotePlayerController)||void 0===t||t.muteOrUnmute())}get volume(){var e,t;return null!==(t=null===(e=this.remotePlayer)||void 0===e?void 0:e.volumeLevel)&&void 0!==t?t:0}set volume(e){var t;const i=this.remotePlayer;(null==i?void 0:i.canControlVolume)&&i.volumeLevel!==e&&(i.volumeLevel=e,null===(t=this.remotePlayerController)||void 0===t||t.setVolumeLevel())}pause(){var e,t,i;!(null===(e=this.remotePlayer)||void 0===e?void 0:e.isPaused)&&(null===(t=this.remotePlayer)||void 0===t?void 0:t.canPause)&&(null===(i=this.remotePlayerController)||void 0===i||i.playOrPause())}play(){return T(this,void 0,void 0,(function*(){yield new Promise(((t,i)=>{var a,s,r,n,o;null!==(s=null===(a=this.remotePlayer)||void 0===a?void 0:a.isConnected)&&void 0!==s&&s?((null===(r=this.remotePlayer)||void 0===r?void 0:r.isPaused)&&(null===(n=this.remotePlayerController)||void 0===n||n.playOrPause()),t()):(null===(o=this.ctrl)||void 0===o||o.error("remote player not connected",this.remotePlayer),i(e.error()))}))}))}get playbackRate(){return-1}set playbackRate(t){throw e.error()}addEventListener(t,i){throw e.error()}removeEventListener(t,i){throw e.error()}get currentSrc(){throw e.error()}load(){throw e.error()}static error(){return new Error("tried to call unsupported method on chromecast media element")}},t=new WeakMap,i=new WeakMap,a=new WeakMap,(()=>{const t="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;s=[p.Ee],E(e,null,s,{kind:"getter",name:"textTracks",static:!1,private:!1,access:{has:e=>"textTracks"in e,get:e=>e.textTracks},metadata:t},null,r),t&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})})(),e})();const k={Generator:class{execute(e,t){var i;try{null===(i=e.viewCtrl)||void 0===i||i.removeMediaCanvas()}catch(e){}t(new S)}},Controller:m}},54449:(e,t,i)=>{i.d(t,{F:()=>T});var a=i(97173),s=i(48669),r=i(14822),n=i(1368),o=i(70182),l=i(89986),h=i.n(l),d=i(25160),c=i(9489),u=function(e,t,i){for(var a=arguments.length>2,s=0;s<t.length;s++)i=a?t[s].call(e,i):t[s].call(e);return a?i:void 0},m=function(e,t,i,a,s,r){function n(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=a.kind,h="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?a.static?e:e.prototype:null,c=t||(d?Object.getOwnPropertyDescriptor(d,a.name):{}),u=!1,m=i.length-1;m>=0;m--){var p={};for(var v in a)p[v]="access"===v?{}:a[v];for(var v in a.access)p.access[v]=a.access[v];p.addInitializer=function(e){if(u)throw new TypeError("Cannot add initializers after decoration has completed");r.push(n(e||null))};var E=(0,i[m])("accessor"===l?{get:c.get,set:c.set}:c[h],p);if("accessor"===l){if(void 0===E)continue;if(null===E||"object"!=typeof E)throw new TypeError("Object expected");(o=n(E.get))&&(c.get=o),(o=n(E.set))&&(c.set=o),(o=n(E.init))&&s.unshift(o)}else(o=n(E))&&("field"===l?s.unshift(o):c[h]=o)}d&&Object.defineProperty(d,a.name,c),u=!0},p=function(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})},v=function(e,t,i,a){if("a"===i&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?a:"a"===i?a.call(e):a?a.value:t.get(e)},E=function(e,t,i,a,s){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?s.call(e,i):s?s.value=i:t.set(e,i),i};let T=(()=>{var e,t,i,l,T,y,f,g,S,k,_,C,A,w,b,P,R,L,M,N;let D,I,x,V,U,O,H,F=[d.JW],W=[],G=[];I=class{get executionContextProvider(){var e;return null!==(e=this.player)&&void 0!==e?e:null}get model(){return this.player.model}get pc(){return this.model.playerConfig}get mc(){return this.model.mediaCollection}get vc(){return this.player.viewCtrl}get videoScale(){return this.model.videoScaleMode}set videoScale(e){this.model.videoScaleMode!==e&&(this.model.videoScaleMode=e,this.applyVideoScale(e))}set remotePlaybackDevice(t){v(this,e,"f")!==t&&(this.player.loop.dispatchEvent(a.a.REMOTE_PLAYBACK_CHANGED,(0,c.cl)(t)?{isRemote:!1}:{isRemote:!0,device:t}),this.player.isLive&&!this.player.isAudio&&this.vc.setLiveInitialBufferState()),E(this,e,t,"f")}get remotePlaybackDevice(){return v(this,e,"f")}get isRemotePlayback(){return!(0,c.cl)(v(this,e,"f"))}get playbackStalled(){return v(this,T,"f")}get __cumulativeDrift(){return v(this,A,"f")}constructor(s,n){this.minDisplayedLiveOffset=(u(this,G),7),this.subtitleListeners=[],this.audioTrackListeners=[],this.audioTracks=[],this.audioTrack=null,e.set(this,null),t.set(this,0),i.set(this,0),l.set(this,!1),T.set(this,!1),y.set(this,0),f.set(this,!1),g.set(this,!1),this._duration=0,this._dvrModeEnabled=!1,S.set(this,-1),k.set(this,-1),_.set(this,0),C.set(this,0),A.set(this,0),this.isAtEnd=!1,this._useAndroidInitialSeekFallback=!1,w.set(this,-1),b.set(this,-1),P.set(this,!1),this._ready=!1,this._pendingSeek=0,R.set(this,-1),L.set(this,!1),this._dvrEnabled=!1,this._dvrIsLive=!1,this._dvrWindow=0,this.expectedAudios=[],M.set(this,!1),this.pinnedDvrSync=null,this.dvrWindowUnstable=!1,this[N]=this.getClassTypeString(),this.player=s,this.mediaElement=n,this.applyVideoScale(this.videoScale),this.player.loop.dispatchEvent(a.a.EVENT_INIT,{}),this.player.loop.dispatchEvent(a.a.EVENT_STATUS_CHANGE,{status:"init"}),this.emap=new(h()),this.addEventListeners(),r.x.for(this.player).storageListeners.add(this),n instanceof HTMLMediaElement&&(n.textTracks.onaddtrack=e=>{this.onTextTracksChanged(e)},n.textTracks.onremovetrack=e=>{this.onTextTracksChanged(e)}),this.player.loop.dispatchEvent(a.a.EVENT_STATUS_CHANGE,{status:"ready"})}debugString(){return"none"}debugQualityLevel(){return[-1,1]}debugResolution(){return this.isRemotePlayback?"-":`${this.mediaElement.videoWidth}x${this.mediaElement.videoHeight}`}debugFrames(){if(this.mediaElement instanceof HTMLVideoElement){const e=this.mediaElement.getVideoPlaybackQuality();return`${e.droppedVideoFrames} dropped of ${e.totalVideoFrames}`}return"no video info available"}get subQualities(){return this.error("using base implementation for subQuality listing!"),[{level:-1,label:"Auto",width:-1}]}selectSubQuality(e){this.error("using base implementation for subQuality selection!")}get currentSubQuality(){return this.error("using base implementation for currentSubQuality!"),-1}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.player.console.log(`[${this.getClassTypeString()}]`,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.player.console.info(`[${this.getClassTypeString()}]`,...t)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.player.console.warn(`[${this.getClassTypeString()}]`,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.player.console.error(`[${this.getClassTypeString()}]`,...t)}onTextTracksChanged(e){this.subtitleListeners.forEach((t=>{t.onTextTracksChanged(e)}))}addSubtitleListener(e){this.subtitleListeners.includes(e)||this.subtitleListeners.push(e)}removeSubtitleListener(e){const t=this.subtitleListeners.indexOf(e);-1!==t&&(this.subtitleListeners=this.subtitleListeners.splice(t,1))}onAudioTracksChanged(){1===this.audioTracks.length&&1===this.expectedAudios.length&&"audio-description"===this.expectedAudios[0].kind&&(this.audioTracks[0].isAudioDescription=!0),this.player.loop.dispatchEvent(a.a.AUDIO_TRACK_LIST_CHANGED,{audioTracks:this.audioTracks}),this.audioTrackListeners.forEach((e=>{e.onAudioTracksChanged(this.audioTracks)}))}addAudioTrackListener(e){this.audioTrackListeners.includes(e)||this.audioTrackListeners.push(e)}removeAudioTrackListener(e){const t=this.audioTrackListeners.indexOf(e);-1!==t&&(this.audioTrackListeners=this.audioTrackListeners.splice(t,1))}addEventListeners(){this.emap.map(this.mediaElement,"loadstart",this.onLoadStart,this),this.emap.map(this.mediaElement,"canplay",this.onCanPlay,this),this.emap.map(this.mediaElement,"play",this.onPlay,this),this.emap.map(this.mediaElement,"pause",this.onPause,this),this.emap.map(this.mediaElement,"error",this.onError,this),this.emap.map(this.mediaElement,"waiting",this.onWaiting,this),this.emap.map(this.mediaElement,"ended",this.onEnded,this),this.emap.map(this.mediaElement,"timeupdate",this.onTimeUpdate,this),this.emap.map(this.mediaElement,"seeking",this.onSeeking,this),this.emap.map(this.mediaElement,"seeked",this.onSeekEnd,this),this.emap.map(this.mediaElement,"loadedmetadata",this.onLoadedMetadata,this),this.emap.map(this.mediaElement,"loadeddata",this.onLoadedData,this),this.emap.map(this.mediaElement,"durationchange",this.onDurationChange,this),this.emap.map(this.mediaElement,"progress",this.onProgress,this),this.emap.map(this.mediaElement,"stalled",this.onStalled,this),this.emap.map(this.mediaElement,"volumechange",this.onLocalVolumeChange,this)}onLoadStart(){var e,t;s.O.isAndroidDevice&&(null!==(t=null===(e=this.mediaElement)||void 0===e?void 0:e.currentSrc)&&void 0!==t?t:"").toLowerCase().indexOf(".m3u8")>0&&(this._useAndroidInitialSeekFallback=!0)}onCanPlay(){this.mediaElement instanceof HTMLMediaElement&&!(this.mediaElement.readyState>=this.mediaElement.HAVE_FUTURE_DATA)||this.bufferingEventHandler(!1),E(this,T,!1,"f"),this.setPlaybackRate(this.model.playbackRate)}onPlay(){this.startTicker(),this.playEventHandler(),this.bufferingEventHandler(!1),this.vc.setOutDelayed()}onPause(e){this.pauseEventHandler(e,!isNaN(this.mediaElement.currentTime)&&!isNaN(this.mediaElement.duration)&&this.mediaElement.currentTime>=this.mediaElement.duration&&("ios"!==s.O.platform||!this.player.isLive))}onError(e){this.handleError(e)}onWaiting(e){this.mediaElement instanceof HTMLMediaElement&&this.bufferingEventHandler(this.mediaElement.readyState<this.mediaElement.HAVE_FUTURE_DATA),E(this,T,!0,"f")}onEnded(e){this.stopTicker(),this.mediaElement.pause(),this.endEventHandler(e),this.onTimeChange(this._duration,0)}onTimeUpdate(e){if(this.onProgress(null),this.updateTicker(),this.isSeeking()&&!v(this,P,"f")){const e=this.getCurrentTime();Math.abs(v(this,b,"f")-e)<Math.abs(v(this,w,"f")-e)&&this.onSeekEnd(null)}}onSeeking(){E(this,P,!0,"f"),v(this,f,"f")||0!==this._pendingSeek||this.player.loop.dispatchEvent(a.a.EVENT_SEEK_START,{from:v(this,w,"f"),to:v(this,b,"f")}),this.bufferingEventHandler(!0)}onSeekEnd(e){this.isSeeking()&&(v(this,f,"f")||0!==this._pendingSeek||this.player.loop.dispatchEvent(a.a.EVENT_SEEK_END,{lastPosition:v(this,w,"f"),position:this.getCurrentTime()}),E(this,f,!1,"f"),E(this,w,-1,"f"),E(this,b,-1,"f"),v(this,P,"f")||this.bufferingEventHandler(!1),E(this,P,!1,"f"),this.bufferingEventHandler(!1),this.player.clearExecutionContext(a.a.EVENT_SEEK_START,a.a.EVENT_SEEK_START_INTENT,a.a.EVENT_SEEK_END,a.a.EVENT_BUFFERING))}isSeeking(){return v(this,P,"f")||-1!==v(this,b,"f")&&-1!==v(this,w,"f")}onLoadedMetadata(){this._ready=!0,this.evalInitialSeek()}onLoadedData(){this.evalInitialSeek(),this.onProgress(null)}onDurationChange(e){const t=this.mediaElement.duration;isNaN(t)||(this._duration=t),this._ready=!0,this.onProgress(null)}onLocalVolumeChange(e){const t=this.mediaElement.muted,i=this.mediaElement.volume;this.getVolume()/100===i&&v(this,M,"f")===t||(this.player.setMutedInternal(t,!0,!1,!0,!0),this.player.setVolumeInternal(100*i,!0,!1,!1))}onProgress(e){var t;if(!this.mediaElement||"waiting"===(null==e?void 0:e.type)&&this.isSeeking())return;const i=this.getCurrentTime(),a=this.getDuration();let s=-1;const r=null===(t=this.mediaElement)||void 0===t?void 0:t.buffered;if(r)for(let e=0;e<r.length;e++)if(r.start(e)<=i&&r.end(e)>=i){s=r.end(e);break}if(-1===s)return;const n=Math.round(s/a*100);this.bufferProgressHandler(n)}onStalled(e){this.onProgress(e)}onSourceError(e){this.stopTicker(),this.handleError(e)}onTimeChange(e,t){this.model.duration!==e&&e>0&&this.model.duration>0&&null!=this.pinnedDvrSync&&(this.pinnedDvrSync=null,this.dvrWindowUnstable=!0,this.warn("DVR window unstable, disabled sync info pinning")),this.updateDuration(e),this.updateTime(Math.max(t,0))}bufferingEventHandler(e){this.onProgress(null),e&&!this.isAtEnd?this.vc.showBufferingIndicator():this.vc.hideBufferingIndicator(),e!==v(this,l,"f")&&(E(this,l,e,"f"),this.player.loop.dispatchEvent(a.a.EVENT_BUFFERING,{isBuffering:e}))}bufferProgressHandler(e){this.vc.updateBufferProgress(e),E(this,y,e,"f")}playEventHandler(){var e;if(this.stopOtherPlayingPlayers(),this.model.playstate=o.R.PLAYSTATE_PLAYING,this.player.loop.dispatchEvent(a.a.EVENT_STATUS_CHANGE,{status:"play"}),this.isAtEnd){const t=this.getCurrentTimeWithoutSeek();null===(e=this.executionContextProvider)||void 0===e||e.preserveExecutionContext(a.a.EVENT_INITIAL_FRAME,500);const i=e=>{e.currentTime!==t&&(this.player.loop.dispatchEvent(a.a.EVENT_INITIAL_FRAME,{}),v(this,l,"f")||this.bufferingEventHandler(!1))},s=()=>{this.player.loop.removeEventListener(a.a.EVENT_UPDATE_STREAM_TIME,i),this.player.loop.removeEventListener(a.a.EVENT_INITIAL_FRAME,s)};this.player.loop.addEventListener(a.a.EVENT_UPDATE_STREAM_TIME,i),this.player.loop.addEventListener(a.a.EVENT_INITIAL_FRAME,s)}this.isAtEnd=!1,this.player.pixelController.replayTrigger(),this.player.pixelController.initialPlayTrigger(),this.player.loop.dispatchEvent(a.a.EVENT_PLAY_STREAM,{})}pauseEventHandler(e,t){void 0===t&&(t=!1),this.model.playstate=o.R.PLAYSTATE_PAUSED,this.player.loop.dispatchEvent(a.a.EVENT_STATUS_CHANGE,{status:"pause"}),this.player.loop.dispatchEvent(a.a.EVENT_PAUSE_STREAM,{ended:t})}endEventHandler(e){this.jumpToStart(),this.player.pixelController.triggerPixel(n.k.CLIP_ENDED),this.pauseEventHandler(e,!0),this.vc.hidePosterFrame(),this.mc.isLive||this.vc.showPlayAgain(),this.vc.hideBufferingIndicator(),"web"===s.O.platform&&this.player.setFullscreenInternal(!1),this.player.pixelController&&(this.player.pixelController._isReplay=!0),this.isAtEnd=!0,this.player.loop.dispatchEvent(a.a.EVENT_END_STREAM,{})}evalInitialSeek(){if(this._pendingSeek>0){if(this.canSeek()){E(this,f,!0,"f");const e=this._pendingSeek;this._pendingSeek=0,this.setCurrentTime(e,v(this,g,"f"),!1,!0),v(this,g,"f")||this.play()}}else v(this,g,"f")||this.play()}updateDuration(e){this.model.duration!==e&&(this.model.duration=e,this.player.loop.dispatchEvent(a.a.EVENT_UPDATE_STREAM_DURATION,{duration:e}))}restartMedia(){this.jumpToStart(),this.play()}resetStartAndEndTime(){this.pc.generic.vodStartSeconds=0,this.pc.generic.vodEndSeconds=0}updateTime(e){this.model.time=e,this.vc.updateTime(e),this.vc.updateTimeline(e,this.model.duration);const s=Date.now();if(s>=v(this,i,"f")+1e3){E(this,i,s,"f");let t=0;const a=Math.round(this.model.duration),r=Math.round(e);this.vc._dvrEnabledAndRequested&&!this.vc._dvrIsLive&&(t=Math.min(Math.round(a-e),a)),this.player.pixelController.triggerCustomPixel(n.k.SUPER_PLAYHEAD_POSITION,!1,{currentTime:r,duration:a,dvrRelativeTime:-t})}const l=this.pc.generic.vodStartSeconds,h=this.pc.generic.vodEndSeconds;if(l>0&&e<l){const i=Math.round(e);Math.abs(v(this,t,"f")-i)>3&&(this.setCurrentTime(l,!1,!1,!0),E(this,t,i,"f"))}else h>0&&e>h&&(this.setCurrentTime(l,!1,!1,!0),this.pause());this.player.loop.dispatchEvent(a.a.EVENT_UPDATE_STREAM_TIME,{currentTime:e}),window.parent!==window&&r.x.AVAILABLE&&this.model.playstate===o.R.PLAYSTATE_PLAYING&&r.x.get(r.x.SUFFIX_GLOBAL,r.x.CURRENT_PLAYERID,!0)!==this.player.getId()&&this.pause()}removeEventListeners(){this.emap.all()}dispose(){this.log("dispose()"),this.removeEventListeners(),r.x.for(this.player).storageListeners.delete(this),this.mediaElement instanceof HTMLMediaElement&&(this.mediaElement.textTracks.onaddtrack=null,this.mediaElement.textTracks.onremovetrack=null),this.mediaElement.pause(),this.subtitleListeners=[],this.audioTrackListeners=[],this.stopTicker(),this.player.loop.dispatchEvent(a.a.EVENT_STOP_STREAM,{}),v(this,g,"f")&&0===this.model.playstate&&(this.model.playstate=3),this.audioTracks=[],this.audioTrack=null}stopOtherPlayingPlayers(){r.x.add(r.x.SUFFIX_GLOBAL,r.x.CURRENT_PLAYERID,this.player.getId(),!0,!0),o.R.autoPlayerAlreadyActive=this.player.getId()}onStorageValueChanged(e,t){e===r.x.CURRENT_PLAYERID&&"string"==typeof t&&this.isPlaying()&&t!==this.player.getId()&&this.pause()}loadStream(e){if(E(this,g,1===this.model.playstate||3===this.model.playstate,"f"),this.model.playstate=o.R.PLAYSTATE_UNSPECIFIED,v(this,g,"f")||this.stopOtherPlayingPlayers(),this.player.preserveExecutionContext(a.a.EVENT_LOAD_STREAM,5e3),this.player.loop.dispatchEvent(a.a.EVENT_LOAD_STREAM,{mediaStream:e}),this._pendingSeek=this.model.time,0===this._pendingSeek&&!this.mc.isLive){let e=this.pc.generic.vodInitialPlayheadSeconds;e<=0&&(e=this.pc.generic.vodStartSeconds),this._pendingSeek=e}if(this.mediaElement instanceof HTMLMediaElement)for(;this.mediaElement.children.length>0;)this.mediaElement.removeChild(this.mediaElement.children[0]);if(this.expectedAudios=e.audios,this.addSource(e),!s.O.isEmbedded){const e=r.x.volume(this.player),t=this.pc.generic.isMuted||r.x.muted(this.player);this.player.setVolumeInternal(e,!1,!0,!0),this.player.setMutedInternal(t,!1,!0,!1,!1)}if(v(this,g,"f")){const e=()=>{this.pause(),this.mediaElement.removeEventListener("canplay",e)};this.mediaElement.addEventListener("canplay",e)}this.mediaElement.load()}startTicker(){this.stopTicker(),this.updateTicker(),E(this,R,this.player.safeInterval((()=>{this.updateTicker()}),500),"f")}stopTicker(){clearInterval(v(this,R,"f")),E(this,R,-1,"f")}updateTicker(){this.onTimeChange(this.getDuration(),this.getCurrentTime())}play(){var e;this.player.preserveExecutionContext(a.a.EVENT_PLAY_STREAM),E(this,g,!1,"f"),v(this,L,"f")?this.handleError():null===(e=this.mediaElement.play())||void 0===e||e.then((()=>{var e;try{this.player.checkState()}catch(e){return void this.warn("aborting async",e)}null===(e=this.vc)||void 0===e||e.hidePosterFrame(),this.startTicker()})).catch((e=>{var t,i,s;try{this.player.checkState()}catch(e){return void this.warn("aborting async",e)}this.error("playback failure",e),null===(t=this.player)||void 0===t||t.loop.dispatchEvent(a.a.EVENT_AUTOPLAY_STREAM_PROHIBITED,{}),null===(i=this.vc)||void 0===i||i.showPlayBtn(),null===(s=this.vc)||void 0===s||s.showPosterFrame(),this.stopTicker()}))}pause(){this.player.preserveExecutionContext(a.a.EVENT_PAUSE_STREAM),this.model.playstate=o.R.PLAYSTATE_PAUSED,this.mediaElement.pause(),this.mc.isLive&&this.mc.isDvrEnabled||(this.updateTicker(),this.stopTicker())}togglePlay(){v(this,L,"f")?this.handleError():this.isPlaying()?this.pause():this.play()}isPlaying(){return this.model.playstate===o.R.PLAYSTATE_PLAYING}setVolume(e){e>=0&&e<=100&&(this.mediaElement.volume=e/100)}getVolume(){return r.x.volume(this.player)}setMuted(e){E(this,M,e,"f"),this.mediaElement.muted=e,this.mediaElement instanceof HTMLMediaElement&&(e?this.mediaElement.setAttribute("muted","muted"):this.mediaElement.removeAttribute("muted"))}setCurrentTime(e,t,i,s){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),this.player.preserveExecutionContext(a.a.EVENT_SEEK_START),this.canCalculateDvrUnixTime()&&e>=this.dvrRelToUnix(0)&&(e=this.dvrUnixToRel(e));const r=this.getDuration()>0?Math.min(e,this.getDuration()-.1):e;this.setSeekEventTimestamps(this.getCurrentTime(),r),this.setCurrentTimeRaw(r,t,i,s),this.player.model.time=r}setSeekEventTimestamps(e,t){E(this,w,e,"f"),E(this,b,t,"f")}setCurrentTimeRaw(e,t,i,s){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),E(this,_,0,"f"),E(this,C,0,"f"),E(this,A,0,"f");const r=this.pc.generic.vodStartSeconds,n=this.pc.generic.vodEndSeconds;if(!s&&(r>0&&e<r||n>0&&e>n)&&this.resetStartAndEndTime(),this._ready){if(!this.canSeek())return;e=Math.max(0,e),this._pendingSeek=0,this.isAtEnd&&E(this,f,!0,"f");try{this.player.preserveExecutionContextAlias(a.a.EVENT_SEEK_START,-1,a.a.EVENT_SEEK_START_INTENT,a.a.EVENT_SEEK_END,a.a.EVENT_BUFFERING),v(this,f,"f")||0!==this._pendingSeek||this.player.loop.dispatchEvent(a.a.EVENT_SEEK_START_INTENT,{from:v(this,w,"f"),to:v(this,b,"f")}),i||(this.mediaElement.currentTime=e)}catch(t){this._pendingSeek=e}}else this._pendingSeek=e;this.updateTicker(),this.isAtEnd&&!t&&this.play()}seekToLive(){this.canSeek()&&this.setCurrentTime(this.getDuration())}setPlaybackRate(e){const t=this.model.playbackRate!==e||this.mediaElement.playbackRate!==e;this.model.playbackRate=e,this.mediaElement.playbackRate!==e&&(this.mediaElement.playbackRate=e),t&&this.player.loop.dispatchEvent(a.a.PLAYBACK_RATE_CHANGE,{rate:e})}getDvrToDateSync(){return null}getSmoothDvrToDateSync(e){var t,i,a;return!this.dvrWindowUnstable&&e&&this.canCalculateDvrUnixTime()?(null==this.pinnedDvrSync&&(this.pinnedDvrSync=this.getDvrToDateSync(),0!==(null===(t=this.pinnedDvrSync)||void 0===t?void 0:t.rel)&&0!==(null===(i=this.pinnedDvrSync)||void 0===i?void 0:i.real)&&0!==(null===(a=this.pinnedDvrSync)||void 0===a?void 0:a.at)||(this.pinnedDvrSync=null)),this.pinnedDvrSync):this.getDvrToDateSync()}dvrRelToUnix(e,t){void 0===t&&(t=!1);const i=this.getSmoothDvrToDateSync(t);if(null!==i){if(t&&!this.dvrWindowUnstable)return this.__dvrRelToUnixRaw(e,i)|0;let a=v(this,A,"f");if(this.isPlaying()&&!this.playbackStalled){if(0!==v(this,_,"f")){const e=this.getCurrentTime();if(isFinite(e)&&e>0){const t=this.__dvrRelToUnixRaw(e,i)-v(this,_,"f");E(this,A,v(this,A,"f")+t,"f"),a+=t,this.info("PAUSE DRIFT",t)}E(this,_,0,"f"),E(this,C,0,"f")}const e=performance.now(),t=1e3*this.__dvrRelToUnixRaw(100,i);if(-1!==v(this,S,"f")&&-1!==v(this,k,"f")){const i=t-(v(this,k,"f")+(e-v(this,S,"f")));Math.abs(i)>=10&&(E(this,A,v(this,A,"f")+i/1e3,"f"),a+=i/1e3)}E(this,S,e,"f"),E(this,k,t,"f")}else E(this,S,-1,"f"),E(this,k,-1,"f"),0===v(this,C,"f")?(E(this,C,this.getCurrentTime(),"f"),E(this,_,this.__dvrRelToUnixRaw(v(this,C,"f"),i),"f")):a+=this.__dvrRelToUnixRaw(this.getCurrentTime(),i)-v(this,_,"f");return this.__dvrRelToUnixRaw(e,i)-a|0}return t&&!this.dvrWindowUnstable||(E(this,_,0,"f"),E(this,C,0,"f"),E(this,A,0,"f")),0}__dvrRelToUnixRaw(e,t){const i=t.rel-e,a=Date.now()-t.at;return(t.real+a)/1e3-i}dvrUnixToRel(e){return e-this.dvrRelToUnix(0)}canCalculateDvrUnixTime(){const e=this.getDvrToDateSync();return null!=e&&0!==e.real&&0!==e.rel&&0!==e.at}dvrUnixToRelNullable(e){const t=this.dvrRelToUnixNullable(0);return null==t?null:e-t}dvrRelToUnixNullable(e,t){return void 0===t&&(t=!1),null==this.getSmoothDvrToDateSync(t)?null:this.dvrRelToUnix(e,t)}canSeek(){return this.mediaElement instanceof HTMLMediaElement&&this.mediaElement.seekable.length>0}getPercentBuffered(){return v(this,y,"f")}getCurrentTime(){if(this._pendingSeek>0)return this._pendingSeek;const e=this.mediaElement.currentTime;return isNaN(e)?this.model.time:e}getCurrentTimeWithoutSeek(){return!v(this,f,"f")&&v(this,w,"f")>=0?v(this,w,"f"):this.getCurrentTime()}setTimeByPercent(e){const t=e/100*this.getDuration();return this.setCurrentTime(t),t}getDuration(){const e=this.mediaElement.duration;return isNaN(e)?0!==this._duration?this._duration:this.model.duration:e}stop(e){if(!this.isAtEnd){this.model.playstate=o.R.PLAYSTATE_STOPPED,this.isAtEnd=!0,this.player.loop.dispatchEvent(a.a.EVENT_STOP_STREAM,{}),this.player.loop.dispatchEvent(a.a.EVENT_STATUS_CHANGE,{status:"stop"});try{this.player.checkStateStrict(),this.pause(),this.jumpToStart(),this.bufferingEventHandler(!1),this.updateTicker(),this.stopTicker()}catch(e){}}}jumpToStart(){this.setCurrentTime(0,!0)}onDVRCallback(e,t,i){this._dvrEnabled=e&&t>=120,this._dvrWindow=t,this._dvrIsLive=i,this.player.viewCtrl.onDVRCallback(this._dvrEnabled,this._dvrWindow,this._dvrIsLive),this.updateTicker(),this.player.loop.dispatchEvent(a.a.EVENT_DVR_CHANGE,{dvrEnabled:this._dvrEnabled,dvrIsLive:this._dvrIsLive,dvrWindow:this._dvrWindow})}getAudioTracks(){return[]}setAudioTrack(e){}setAudioTrackById(e){}getAudioTrack(){return null}handleError(e){var t;this.stopTicker(),E(this,L,!0,"f");let i=[];e&&(this.error(e),"string"==typeof e?i=[e]:"object"==typeof e&&("type"in e&&(0,c.Ed)(e.type)&&"error"!==e.type&&i.push(String(e.type)),"name"in e&&(0,c.Ed)(e.name)&&"error"!==e.name&&i.push(String(e.name)),(0,c.Ed)(e.message)&&i.push(String(e.message)))),null===(t=this.player.errorCtrl)||void 0===t||t.throwStreamError(...i)}toJSON(){return toString()}};return e=new WeakMap,t=new WeakMap,i=new WeakMap,l=new WeakMap,T=new WeakMap,y=new WeakMap,f=new WeakMap,g=new WeakMap,S=new WeakMap,k=new WeakMap,_=new WeakMap,C=new WeakMap,A=new WeakMap,w=new WeakMap,b=new WeakMap,P=new WeakMap,R=new WeakMap,L=new WeakMap,M=new WeakMap,x=[(0,d.C6)(a.a.EVENT_PAUSE_STREAM,{type:"other",initiator:"external-playback-pause"})],V=[(0,d.C6)(a.a.EVENT_PLAY_STREAM)],U=[(0,d.kF)({type:"lifecycle",initiator:"playback-end"})],O=[(0,d.C6)(a.a.EVENT_LOAD_STREAM)],H=[(0,d.kF)({type:"other",initiator:"dvrUpdate"})],N=Symbol.toStringTag,p(I,"AbstractPlayerCtrl"),(()=>{const e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;m(I,null,x,{kind:"method",name:"onPause",static:!1,private:!1,access:{has:e=>"onPause"in e,get:e=>e.onPause},metadata:e},null,G),m(I,null,V,{kind:"method",name:"playEventHandler",static:!1,private:!1,access:{has:e=>"playEventHandler"in e,get:e=>e.playEventHandler},metadata:e},null,G),m(I,null,U,{kind:"method",name:"endEventHandler",static:!1,private:!1,access:{has:e=>"endEventHandler"in e,get:e=>e.endEventHandler},metadata:e},null,G),m(I,null,O,{kind:"method",name:"evalInitialSeek",static:!1,private:!1,access:{has:e=>"evalInitialSeek"in e,get:e=>e.evalInitialSeek},metadata:e},null,G),m(I,null,H,{kind:"method",name:"onDVRCallback",static:!1,private:!1,access:{has:e=>"onDVRCallback"in e,get:e=>e.onDVRCallback},metadata:e},null,G),m(null,D={value:I},F,{kind:"class",name:I.name,metadata:e},null,W),I=D.value,e&&Object.defineProperty(I,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e}),u(I,W)})(),I})()}}]);